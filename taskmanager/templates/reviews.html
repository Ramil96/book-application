{% extends "base.html" %}

{% block content %}
  <div class="container">
    <h1>Reviews</h1>

    <!-- Display Reviews in a Grid -->
    {% if reviews %}
      <div class="reviews-grid">
        {% for review in reviews %}
          <div class="review-card">
            <h3>{{ review.book.title }}</h3>
            <p><strong>Rating:</strong> {{ review.rating }}/5</p>
            <p>{{ review.review_text }}</p>
            <p><em>Genre: {{ review.book.genre.genre_name }}</em></p>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>No reviews yet. Be the first to add one!</p>
    {% endif %}

    <hr>

    <!-- Add a Review -->
    <h2>Add a Review</h2>
    <form method="POST" action="{{ url_for('add_review') }}" class="review-form">
      <div class="form-group">
        <label for="book_id">Select Book:</label>
        <select name="book_id" id="book_id" class="form-control" required>
          {% for book in books %}
            <option value="{{ book.id }}">{{ book.title }}</option>
          {% endfor %}
        </select>
      </div>
      
      <div class="form-group">
        <label for="rating">Rating (1-5):</label>
        <input type="number" name="rating" id="rating" class="form-control" min="1" max="5" required>
      </div>
      
      <div class="form-group">
        <label for="review_text">Review:</label>
        <textarea name="review_text" id="review_text" class="form-control" rows="4" required></textarea>
      </div>
      
      <button type="submit" class="btn btn-primary">Submit Review</button>
    </form>
  </div>
{% endblock %}
