{% extends "base.html" %}

{% block content %}
  <div class="container">
    <h1>Books</h1>

    <!-- Sort Options -->
    <form method="GET" action="{{ url_for('home') }}" class="sort-form">
      <div class="form-group">
        <label for="sort">Sort By:</label>
        <select name="sort" id="sort" class="form-control">
          <option value="">Select...</option>
          <option value="most_rated" {% if sort == 'most_rated' %}selected{% endif %}>Most Rated</option>
          <option value="highest_rated" {% if sort == 'highest_rated' %}selected{% endif %}>Highest Rated</option>
          <option value="alphabetical" {% if sort == 'alphabetical' %}selected{% endif %}>Alphabetical (A-Z)</option>
        </select>
        <button type="submit" class="btn btn-primary">Apply Sort</button>
      </div>
    </form>

    <!-- Books Grid -->
    <div class="books-grid">
      {% for book in books %}
        <div class="book-card">
          <h3><a href="{{ url_for('book_detail', book_id=book.id) }}">{{ book.title }}</a></h3>
          <p><strong>Author:</strong> {{ book.author }}</p>
          <p><strong>Genre:</strong> {{ book.genre.genre_name }}</p>
          <p><strong>Average Rating:</strong> {{ book.average_rating or 'N/A' }}</p>
          <p><strong>Number of Reviews:</strong> {{ book.reviews | length }}</p>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
